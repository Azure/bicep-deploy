{
  "version": 3,
  "sources": ["../src/logging.ts"],
  "sourcesContent": ["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nexport interface Logger {\n  isDebugEnabled(): boolean;\n  debug(message: string): void;\n  logInfo(message: string): void;\n  logWarning(message: string): void;\n  logError(message: string): void;\n  logInfoRaw(message: string): void;\n}\n\nexport type ColorMode = \"off\" | \"ansii\" | \"debug\"; // debug is just used for unit testing\n\nexport enum Color {\n  Reset = \"\\x1b[0m\",\n  Red = \"\\x1b[31m\",\n  Green = \"\\x1b[32m\",\n  Yellow = \"\\x1b[33m\",\n  Blue = \"\\x1b[34m\",\n  Magenta = \"\\x1b[35m\",\n  Cyan = \"\\x1b[36m\",\n  White = \"\\x1b[37m\",\n}\n\nconst colorToName: Record<Color, string> = {\n  \"\\u001b[0m\": \"Reset\",\n  \"\\u001b[31m\": \"Red\",\n  \"\\u001b[32m\": \"Green\",\n  \"\\u001b[33m\": \"Yellow\",\n  \"\\u001b[34m\": \"Blue\",\n  \"\\u001b[35m\": \"Magenta\",\n  \"\\u001b[36m\": \"Cyan\",\n  \"\\u001b[37m\": \"White\",\n};\n\nexport function colorize(message: string, color: Color) {\n  return message\n    .split(\"\\n\")\n    .map(line => `${color}${line}${Color.Reset}`)\n    .join(\"\\n\");\n}\n\nexport function removeColors(message: string) {\n  for (const color in colorToName) {\n    message = message.replaceAll(color, \"\");\n  }\n\n  return message;\n}\n\nexport function getColorString(colorMode: ColorMode, color: Color): string {\n  switch (colorMode) {\n    case \"off\":\n      return \"\";\n    case \"ansii\":\n      return color;\n    case \"debug\":\n      return `<${colorToName[color].toUpperCase()}>`;\n  }\n\n  return color;\n}\n\nexport class ColorStringBuilder {\n  private colorStack: Color[] = [];\n  private buffer: string = \"\";\n  constructor(private colorMode: ColorMode) {}\n\n  append(value: string, color?: Color): this {\n    if (color) {\n      this.pushColor(color);\n    }\n\n    this.buffer += value;\n\n    if (color) {\n      this.popColor();\n    }\n\n    return this;\n  }\n\n  appendLine(value: string = \"\"): this {\n    return this.append(value + \"\\n\");\n  }\n\n  withColorScope(color: Color, action: () => void): void {\n    this.pushColor(color);\n    action();\n    this.popColor();\n  }\n\n  private pushColor(color: Color) {\n    this.colorStack.push(color);\n    this.buffer += getColorString(this.colorMode, color);\n  }\n\n  private popColor() {\n    this.colorStack.pop();\n    const prevColor =\n      this.colorStack[this.colorStack.length - 1] ?? Color.Reset;\n    this.buffer += getColorString(this.colorMode, prevColor);\n  }\n\n  build(): string {\n    return this.buffer;\n  }\n}\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,WAAAE,EAAA,uBAAAC,EAAA,aAAAC,EAAA,mBAAAC,EAAA,iBAAAC,IAAA,eAAAC,EAAAP,GAaO,IAAKE,OACVA,EAAA,MAAQ,UACRA,EAAA,IAAM,WACNA,EAAA,MAAQ,WACRA,EAAA,OAAS,WACTA,EAAA,KAAO,WACPA,EAAA,QAAU,WACVA,EAAA,KAAO,WACPA,EAAA,MAAQ,WAREA,OAAA,IAWNM,EAAqC,CACzC,UAAa,QACb,WAAc,MACd,WAAc,QACd,WAAc,SACd,WAAc,OACd,WAAc,UACd,WAAc,OACd,WAAc,OAChB,EAEO,SAASJ,EAASK,EAAiBC,EAAc,CACtD,OAAOD,EACJ,MAAM;AAAA,CAAI,EACV,IAAIE,GAAQ,GAAGD,CAAK,GAAGC,CAAI,SAAgB,EAC3C,KAAK;AAAA,CAAI,CACd,CAEO,SAASL,EAAaG,EAAiB,CAC5C,QAAWC,KAASF,EAClBC,EAAUA,EAAQ,WAAWC,EAAO,EAAE,EAGxC,OAAOD,CACT,CAEO,SAASJ,EAAeO,EAAsBF,EAAsB,CACzE,OAAQE,EAAW,CACjB,IAAK,MACH,MAAO,GACT,IAAK,QACH,OAAOF,EACT,IAAK,QACH,MAAO,IAAIF,EAAYE,CAAK,EAAE,YAAY,CAAC,GAC/C,CAEA,OAAOA,CACT,CAEO,IAAMP,EAAN,KAAyB,CAG9B,YAAoBS,EAAsB,CAAtB,eAAAA,EAFpB,KAAQ,WAAsB,CAAC,EAC/B,KAAQ,OAAiB,EACkB,CAE3C,OAAOC,EAAeH,EAAqB,CACzC,OAAIA,GACF,KAAK,UAAUA,CAAK,EAGtB,KAAK,QAAUG,EAEXH,GACF,KAAK,SAAS,EAGT,IACT,CAEA,WAAWG,EAAgB,GAAU,CACnC,OAAO,KAAK,OAAOA,EAAQ;AAAA,CAAI,CACjC,CAEA,eAAeH,EAAcI,EAA0B,CACrD,KAAK,UAAUJ,CAAK,EACpBI,EAAO,EACP,KAAK,SAAS,CAChB,CAEQ,UAAUJ,EAAc,CAC9B,KAAK,WAAW,KAAKA,CAAK,EAC1B,KAAK,QAAUL,EAAe,KAAK,UAAWK,CAAK,CACrD,CAEQ,UAAW,CACjB,KAAK,WAAW,IAAI,EACpB,IAAMK,EACJ,KAAK,WAAW,KAAK,WAAW,OAAS,CAAC,GAAK,UACjD,KAAK,QAAUV,EAAe,KAAK,UAAWU,CAAS,CACzD,CAEA,OAAgB,CACd,OAAO,KAAK,MACd,CACF",
  "names": ["logging_exports", "__export", "Color", "ColorStringBuilder", "colorize", "getColorString", "removeColors", "__toCommonJS", "colorToName", "message", "color", "line", "colorMode", "value", "action", "prevColor"]
}
